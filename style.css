/* style.css */

html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  width: 100%;
  background: #0078D4;
  color: white;
  font-family: "Segoe UI", Arial, sans-serif;
  overflow: hidden;
  user-select: none;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
}

#fullscreen-container {
  width: 100vw;
  height: 100vh;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  background: #0078D4;
  position: relative;
}

h1 {
  margin-top: 0;
  font-weight: normal;
  display: none;
}
#main-title {
    margin-bottom: 2vh;
    font-size: 5vw;
}

.fixed-element {
    position: fixed;
    display: none;
    z-index: 1000;
}


#progress-bar {
  width: 80%;
  max-width: 600px;
  height: 3vh;
  background: #004D99;
  margin: 3vh auto;
  border-radius: 5px;
  overflow: hidden;
  box-shadow: 0 0 10px rgba(255,255,255,0.7) inset;
  display: none;
}
#progress {
  height: 100%;
  width: 0;
  background: white;
  border-radius: 5px;
  transition: width 0.3s ease;
}
#status {
  text-align: center;
  font-size: 3vw;
  margin-top: 2vh;
  min-height: 4vh;
}

#search-bar-wrapper {
  display: none; /* MODIFIÉ: Initialement caché, sera affiché par JS */
  margin-top: 3vh;
  width: 80%;
  max-width: 500px;
  display: flex; /* MODIFIÉ: Affiché par défaut en flex, mais sera contrôlé par JS */
  justify-content: center;
  align-items: center;
  position: relative;
  z-index: 6000;
}

#search-bar {
  flex-grow: 1;
  padding: 1vh;
  font-size: 2.5vw;
  border-radius: 5px;
  border: 2px solid white;
  outline: none;
  text-align: center;
  background: #004D99;
  color: white;
  margin-right: 1vh;
  display: block;
}
#search-bar:focus {
  box-shadow: 0 0 8px rgba(255,255,255,0.8);
}

#submit-search-btn {
  padding: 1vh 2vw;
  font-size: 2.5vw;
  border-radius: 5px;
  border: 2px solid white;
  background: #006FB7;
  color: white;
  cursor: pointer;
  outline: none;
  transition: background 0.1s ease;
  display: none; /* MODIFIÉ: Initialement caché, sera affiché par JS */
}
#submit-search-btn:active {
  background: white;
  color: #0078D4;
}

/* --- POSITIONS DES ÉLÉMENTS FIXES --- */

/* POPUPS (Haut Gauche) */
#popup-container {
  top: 1vh;
  left: 1vw;
  width: 25vw;
  min-width: 200px;
  z-index: 3000;
  pointer-events: none;
}
.fake-popup {
  background: #005FA8;
  border: 2px solid white;
  padding: 1vh;
  font-family: "Segoe UI", Arial, sans-serif;
  color: white;
  box-shadow: 0 0 15px rgba(255,255,255,0.7);
  animation: fadeOut 5s forwards;
  user-select: none;
  position: absolute;
  width: 100%;
  border-radius: 3px;
  font-size: 2vw;
}
@keyframes fadeOut {
  0% {opacity: 1; transform: translate(var(--popup-offset-x, 0), var(--popup-offset-y, 0));}
  80% {opacity: 1; transform: translate(var(--popup-offset-x, 0), var(--popup-offset-y, 0));}
  100% {opacity: 0; transform: translate(calc(var(--popup-offset-x, 0) + 5vw), var(--popup-offset-y, 0));}
}


/* Calculatrice (Haut Droite) */
#calculator-container {
  top: 1vh;
  right: 1vw;
  width: 20vw;
  min-width: 200px;
  background: #005FA8;
  border: 2px solid white;
  padding: 1vh;
  color: white;
  font-family: "Segoe UI", Arial, sans-serif;
  font-size: 1.5vw;
  user-select: none;
  z-index: 4000;
  border-radius: 5px;
  box-shadow: 0 0 10px rgba(255,255,255,0.5);
}
#calculator-container h3 {
  text-align: center;
  margin-top: 0;
  margin-bottom: 1vh;
}
#calc-display {
  width: 100%;
  height: 4vh;
  background: #004D99;
  border: 1px solid white;
  color: white;
  font-size: 2.5vw;
  margin-bottom: 1vh;
  padding: 0.5vh;
  box-sizing: border-box;
  text-align: right;
  border-radius: 3px;
}
#calc-buttons {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  grid-gap: 1vh;
}
.calc-button {
  background: #006FB7;
  border: 1px solid white;
  color: white;
  font-size: 2.5vw;
  cursor: pointer;
  user-select: none;
  padding: 1vh;
  text-align: center;
  border-radius: 3px;
  transition: background 0.1s ease;
}
.calc-button:active {
  background: white;
  color: #0078D4;
}

/* Matrix Rain (Milieu Gauche) */
#matrix-rain-container {
    top: 50%;
    left: 1vw;
    transform: translateY(-50%);
    width: 25vw;
    min-width: 200px;
    height: 30vh;
    min-height: 200px;
    overflow: hidden;
    background: rgba(0,0,0,0.3);
    border: 2px solid white;
    border-radius: 5px;
    padding: 1vh;
    font-family: monospace;
    font-size: 2vw;
    line-height: 1.2;
    color: #00FF00;
    text-align: left;
    z-index: 1000;
}

/* Morpion (Milieu Droite) */
#morpion-container {
  top: 60%;
  right: 1vw;
  transform: translateY(-50%);
  width: 20vw;
  min-width: 200px;
  background: #005FA8;
  border: 2px solid white;
  padding: 1vh;
  font-size: 1.5vw;
  user-select: none;
  z-index: 2000;
  border-radius: 5px;
  box-shadow: 0 0 10px rgba(255,255,255,0.5);
}
#morpion-container h3 {
  margin-top: 0;
  text-align: center;
  font-size: 2vw;
}
#board {
  display: grid;
  grid-template-columns: repeat(3, 6vw);
  grid-gap: 0.5vh;
  justify-content: center;
  margin-top: 1vh;
}
#board > div {
  width: 6vw;
  height: 6vw;
  background-color: #006FB7;
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 3vw;
  cursor: pointer;
  user-select: none;
  border-radius: 3px;
}
#board > div.used {
  cursor: default;
  opacity: 0.7;
}

/* Rickroll (Bas Gauche) */
#rickroll-video {
  bottom: 1vh;
  left: 1vw;
  width: 25vw;
  height: auto;
  max-height: 25vh;
  border: 2px solid white;
  border-radius: 6px;
  z-index: 4500;
}

/* Subway Surfer Video (Bas Droite) */
#subway-surfer-video {
  bottom: 1vh;
  right: 1vw;
  width: 20vw;
  height: auto;
  max-height: 20vh;
  border: 2px solid white;
  border-radius: 6px;
  z-index: 4500;
}

/* Image troll (HAUT) */
#image-troll {
  top: 1vh;
  left: 50%;
  transform: translateX(-50%);
  text-align: center;
  color: white;
  font-family: "Segoe UI", Arial, sans-serif;
  font-size: 1.5vw;
  user-select: none;
  z-index: 5000;
}
#image-troll img {
  max-width: 15vw;
  max-height: 15vh;
  height: auto;
  border: 2px solid white;
  margin-top: 0.5vh;
  border-radius: 6px;
}

/* Texte dégoulinant (Milieu) */
#degoulinant-text {
  position: fixed;
  top: 40%;
  left: 50%;
  transform: translate(-50%, -50%);
  color: white;
  font-size: 4vw;
  font-weight: bold;
  font-family: "Segoe UI", Arial, sans-serif;
  animation: degoulinement 5s forwards;
  user-select: none;
  pointer-events: none;
  z-index: 5000;
}

/* Alerte personnalisée (Milieu) */
#custom-alert-container {
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #005FA8;
    border: 2px solid white;
    padding: 2vh;
    width: 60vw;
    max-width: 400px;
    box-shadow: 0 0 20px rgba(255,255,255,0.8);
    z-index: 9000;
    text-align: center;
    font-size: 2.5vw;
    line-height: 1.4;
    border-radius: 5px;
}
#custom-alert-container button {
    margin-top: 2vh;
    padding: 1vh 2vw;
    font-size: 2vw;
    border-radius: 5px;
    border: 1px solid white;
    background: #006FB7;
    color: white;
    cursor: pointer;
}
#custom-alert-container button:active {
    background: white;
    color: #0078D4;
}

body.cursor-pale {
  cursor: url('cursor-pale.cur'), auto;
}


/* ========================================================= */
/* --- MODIFIÉ: Media Queries pour les petits écrans (Mobile) --- */
/* ========================================================= */
@media (max-width: 768px) {
    /* Ajustements généraux pour l'affichage principal */
    #fullscreen-container {
        justify-content: flex-start; /* Aligner le contenu en haut pour laisser de la place aux trolls */
        padding-top: 5vh;
    }

    #main-title {
        font-size: 8vw; /* Rendre le titre principal très grand */
        margin-bottom: 4vh;
    }

    #progress-bar {
        width: 90%; /* Barre de progression plus large */
        height: 4vh;
        margin: 4vh auto;
    }
    #status {
        font-size: 6vw; /* Texte de statut très lisible */
        margin-top: 3vh;
        min-height: 7vh;
    }

    #search-bar-wrapper {
        width: 90%; /* Barre de recherche large */
        margin-top: 5vh;
        flex-direction: column; /* Empiler input et bouton si l'espace est limité */
    }
    #search-bar {
        flex-grow: unset; /* Annuler la croissance */
        width: 100%; /* Occuper toute la largeur */
        font-size: 5vw; /* Taille du texte dans la barre de recherche */
        padding: 2vh;
        margin-right: 0; /* Pas de marge à droite si empilé */
        margin-bottom: 2vh; /* Marge en bas si empilé */
    }
    #submit-search-btn {
        width: 100%; /* Bouton prend toute la largeur */
        font-size: 5vw; /* Taille du texte du bouton */
        padding: 2vh;
    }

    /* --- Positionnement et taille des "troll" fixed-elements pour être visibles --- */

    .fixed-element {
        /* Par défaut, on va les centrer et les faire prendre beaucoup de place pour qu'ils soient VUS */
        position: fixed; /* Reste fixe */
        left: 50%; /* Centré horizontalement */
        transform: translateX(-50%); /* Ajustement pour un centrage parfait */
        width: 90vw; /* Prend 90% de la largeur de l'écran */
        z-index: 1000; /* Assure qu'ils sont au-dessus du fond */
        /* Chaque élément sera ensuite repositionné verticalement ou ajusté */
    }

    /* Matrix Rain (Milieu / Haut - pour qu'il soit bien visible) */
    #matrix-rain-container {
        top: 15vh; /* Plus haut sur l'écran pour ne pas être écrasé */
        height: 30vh; /* Prend 30% de la hauteur */
        min-width: unset; /* Supprime les minimums qui peuvent causer des problèmes */
        min-height: unset;
        font-size: 4vw; /* Taille du texte des 0 et 1 (s'il est trop petit, augmente à 5vw) */
        line-height: 1.2;
        padding: 2vh; /* Marge intérieure */
        box-sizing: border-box; /* Inclure le padding dans la largeur/hauteur */
    }

    /* Popups (Haut Gauche -> centré et plus grand) */
    #popup-container {
        top: 2vh;
        left: 50%;
        transform: translateX(-50%);
        width: 90vw; /* Prend presque toute la largeur */
        min-width: unset;
        pointer-events: none; /* Toujours pas interactif */
    }
    .fake-popup {
        font-size: 4vw; /* Texte des popups plus grand */
        padding: 2vh;
        margin-bottom: 1vh; /* Espacement entre les popups */
        animation: none; /* Désactiver l'animation de fadeOut pour les laisser affichés pour le débogage */
        opacity: 1 !important; /* Forcer l'opacité à 1 */
        position: relative; /* Les empiler normalement */
        top: unset;
        left: unset;
        transform: none;
    }
    /* Note: Si les popups se superposent, tu peux ajuster leur positionnement en JS pour qu'ils s'empilent */


    /* Calculatrice (Haut Droite -> centré et plus grand) */
    #calculator-container {
        top: 55vh; /* Positionnement pour ne pas chevaucher le Matrix Rain */
        left: 50%;
        transform: translateX(-50%);
        width: 90vw;
        min-width: unset;
        font-size: 3.5vw;
        padding: 2vh;
    }
    #calculator-container h3 {
        font-size: 5vw;
        margin-bottom: 2vh;
    }
    #calc-display {
        height: 6vh;
        font-size: 5vw;
        padding: 1vh;
    }
    .calc-button {
        font-size: 5vw;
        padding: 2vh;
    }

    /* Morpion (Milieu Droite -> centré et plus grand) */
    #morpion-container {
        top: 15vh; /* Un peu plus bas que le Matrix Rain pour éviter le chevauchement, ajuste si besoin */
        left: 50%;
        transform: translateX(-50%);
        width: 90vw;
        min-width: unset;
        font-size: 3.5vw;
        padding: 2vh;
        margin-top: 20px; /* Ajoute un peu de marge si nécessaire */
    }
    #morpion-container h3 {
        font-size: 5vw;
    }
    #board {
        grid-template-columns: repeat(3, 25vw); /* Cellules du morpion très grandes */
        grid-gap: 1vh;
    }
    #board > div {
        width: 25vw;
        height: 25vw;
        font-size: 10vw; /* "X" et "O" géants */
    }


    /* Rickroll (Bas Gauche -> centré et plus grand) */
    #rickroll-video {
        bottom: 2vh; /* En bas de l'écran */
        left: 50%;
        transform: translateX(-50%);
        width: 90vw; /* Prend presque toute la largeur */
        height: auto;
        max-height: 40vh; /* Hauteur maximale pour ne pas être trop envahissant */
    }

    /* Subway Surfer Video (Bas Droite -> centré et plus grand) */
    #subway-surfer-video {
        bottom: 2vh; /* En bas de l'écran, peut chevaucher le Rickroll si les deux sont actifs */
        left: 50%;
        transform: translateX(-50%);
        width: 90vw;
        height: auto;
        max-height: 40vh;
    }
    /* Note : Si rickroll et subway surfer sont actifs en même temps, ils vont se chevaucher. */
    /* Tu pourrais les placer l'un au-dessus de l'autre si tu veux les voir distinctement. */
    /* Exemple: */
    /* #rickroll-video { bottom: 45vh; } */
    /* #subway-surfer-video { bottom: 2vh; } */


    /* Image troll (milieu -> centré et plus grand) */
    #image-troll {
        top: 10vh; /* Positionné plus haut */
        left: 50%;
        transform: translateX(-50%);
        font-size: 5vw; /* Texte de l'image troll plus grand */
        width: 90vw;
    }
    #image-troll img {
        max-width: 60vw; /* Image plus grande */
        max-height: 30vh;
    }

    /* Texte dégoulinant (Milieu -> centré et très grand) */
    #degoulinant-text {
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 8vw; /* Texte géant pour ne pas le rater */
        width: 90vw;
        text-align: center;
    }

    /* Alerte personnalisée (Milieu -> centré et plus grand) */
    #custom-alert-container {
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 90vw;
        max-width: 500px; /* Maintien une max-width pour ne pas être trop étiré sur tablette */
        font-size: 4vw;
        padding: 3vh;
    }
    #custom-alert-container button {
        font-size: 4vw;
        padding: 1.5vh 3vw;
    }

    /* Cacher le jitter de la souris sur mobile, car peu d'intérêt et potentiellement perturbant */
    body.cursor-pale {
        cursor: auto; /* Revenir au curseur normal sur mobile */
    }
}
